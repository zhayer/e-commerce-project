{"file":"error.js","mappings":"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","names":[],"sources":["src/store/product/mutations.ts","src/functions/error.ts"],"sourcesContent":["import state from './store';\nimport { toggleCart } from '@store/ui';\nimport { addQueryArgs } from '@wordpress/url';\nimport { setProduct } from './setters';\nimport { addCheckoutLineItem } from '@store/checkout/mutations';\n\nexport const submitCartForm = async (productId: string) => {\n  const productState = state[productId];\n  if (!productState) return;\n  if (!productState.selectedPrice?.id) return;\n  if (productState.selectedPrice?.ad_hoc && (null === productState.adHocAmount || undefined === productState.adHocAmount)) return;\n\n  try {\n    setProduct(productId, { busy: true });\n    await addCheckoutLineItem({\n      price: productState.selectedPrice?.id,\n      quantity: Math.max(productState.selectedPrice?.ad_hoc ? 1 : productState.quantity, 1),\n      ...(productState.selectedPrice?.ad_hoc ? { ad_hoc_amount: productState.adHocAmount } : {}),\n      variant: productState.selectedVariant?.id,\n    });\n    toggleCart(true);\n    setProduct(productId, { dialog: null });\n  } catch (e) {\n    console.error(e);\n    state.error = e;\n    throw e; // Re-throw the caught error\n  } finally {\n    setProduct(productId, { busy: false });\n  }\n};\n\n/**\n * Get the product buy link.\n */\nexport const getProductBuyLink = (productId: string, url: string, query = {}) => {\n  const productState = state[productId];\n\n  if (!productState) return;\n  if (!productState.selectedPrice?.id) return;\n  if (productState.selectedPrice?.ad_hoc && !productState.adHocAmount && 0 !== productState.adHocAmount) return;\n\n  return addQueryArgs(url, {\n    line_items: [\n      {\n        price: productState.selectedPrice?.id,\n        quantity: Math.max(productState.selectedPrice?.ad_hoc ? 1 : productState.quantity, 1),\n        ...(productState.selectedPrice?.ad_hoc ? { ad_hoc_amount: productState.adHocAmount } : {}),\n        ...(productState.selectedVariant?.id ? { variant: productState.selectedVariant?.id } : {}),\n      },\n    ],\n    ...query,\n  });\n};\n","import { ScNoticeStore } from '../types';\n\n/**\n * Get any additional error messages.\n */\nexport const getAdditionalErrorMessages = error => (error?.additional_errors || []).map(error => error.message);\n\n/**\n * Get the top level error\n */\nexport const getTopLevelError = (error: ScNoticeStore) => {\n  // checkout invalid is not friendly.\n  if (error?.code === 'checkout.invalid' && getAdditionalErrorMessages(error)?.length) {\n    return '';\n  }\n  return error?.message;\n};\n"],"version":3}