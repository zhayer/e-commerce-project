{"version":3,"file":"functions-line-items.spec.js","sourceRoot":"","sources":["../../../../src/functions/line-items/test/functions-line-items.spec.ts"],"names":[],"mappings":"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","sourcesContent":["import { calculateInitialLineItems, getSessionId } from '../index';\n\nconst prices = [\n  {\n    id: 'price1',\n    product_id: 'product1',\n    quantity: 1,\n    enabled: true,\n  },\n  {\n    id: 'price2',\n    product_id: 'product1',\n    quantity: 2,\n    enabled: true,\n  },\n  {\n    id: 'price3',\n    product_id: 'product2',\n    quantity: 3,\n    enabled: true,\n  },\n  {\n    id: 'price4',\n    product_id: 'product2',\n    quantity: 4,\n    enabled: true,\n  },\n];\n\ndescribe('Line items functions', () => {\n  it('calculateInitialLineItems', () => {\n    expect(calculateInitialLineItems(prices, 'all')).toEqual([\n      { price_id: 'price1', quantity: 1 },\n      { price_id: 'price2', quantity: 2 },\n      { price_id: 'price3', quantity: 3 },\n      { price_id: 'price4', quantity: 4 },\n    ]);\n    expect(calculateInitialLineItems(prices, 'multiple')).toEqual([{ price_id: 'price1', quantity: 1 }]);\n    expect(calculateInitialLineItems(prices, 'single')).toEqual([{ price_id: 'price1', quantity: 1 }]);\n  });\n\n  describe('getSessionId', () => {\n    it('Should be able to refresh', async () => {\n      expect(getSessionId('asdf', { id: 'existing' }, true)).toBe(false);\n    });\n\n    it('Should return the checkout session id if it already exists', async () => {\n      expect(getSessionId('asdf', { id: 'existing' })).toBe('existing');\n    });\n\n    it('Should get the checkout session from the url, first', async () => {\n      delete window.location;\n      window.location = new URL('https://www.example.com?order=urltest') as any;\n      expect(getSessionId('asdf', {})).toBe('urltest');\n    });\n\n    it('Should get the checkout session from localstorage, second', async () => {\n      jest.spyOn(window.localStorage.__proto__, 'getItem');\n      window.localStorage.__proto__.getItem = jest.fn();\n      getSessionId('asdf', {});\n      expect(localStorage.getItem).toHaveBeenCalled();\n    });\n  });\n});\n"]}