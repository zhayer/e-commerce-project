import store from"./store";import{state as checkoutState,reset as resetCheckoutState}from"../checkout/index";import{addQueryArgs,removeQueryArgs}from"@wordpress/url";export const getCheckout=(t,e)=>{var o;return(null===(o=store.state[e])||void 0===o?void 0:o[t])||{}};export const setCheckout=(t,e)=>{const o=(null==t?void 0:t.live_mode)?"live":"test";store.set(o,{...store.state[o],[e]:t}),checkoutState.formId===e&&checkoutState.mode===o&&(checkoutState.checkout=t),"url"===checkoutState.persist&&(null==t?void 0:t.id)&&window.history.replaceState({},document.title,addQueryArgs(window.location.href,{checkout_id:null==t?void 0:t.id}));const c=new CustomEvent("scCheckoutUpdated",{detail:{checkout:checkoutState.checkout,formId:checkoutState.formId,mode:checkoutState.mode},bubbles:!0});document.dispatchEvent(c)};export const clearCheckout=(t,e)=>{var o;const{[t]:c,...r}=store.state[e];window.history.replaceState({},document.title,removeQueryArgs(window.location.href,"redirect_status","coupon","line_items","confirm_checkout_id","checkout_id")),store.set(e,r);const s=JSON.parse(localStorage.getItem("surecart-local-storage")||"{}");(null===(o=s[e])||void 0===o?void 0:o[t])&&(delete s[e][t],localStorage.setItem("surecart-local-storage",JSON.stringify(s))),resetCheckoutState()};