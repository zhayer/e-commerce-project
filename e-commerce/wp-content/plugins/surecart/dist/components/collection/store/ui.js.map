{"version":3,"file":"ui.js","sourceRoot":"","sources":["../../src/store/ui.ts"],"names":[],"mappings":";AAAA,OAAO,EAAE,WAAW,EAAE,MAAM,gBAAgB,CAAC;AAC7C,OAAO,EAAE,KAAK,EAAE,MAAM,iBAAiB,CAAC;AACxC,OAAO,EAAE,EAAE,EAAE,MAAM,iBAAiB,CAAC;AAErC,MAAM,CAAC,MAAM,KAAK,GAAG,WAAW,CAC9B,GAAG,EAAE,CAAC,CAAC;IACL,IAAI,EAAE;QACJ,IAAI,EAAE,KAAK;KACZ;CACF,CAAC,EACF,CAAC,QAAQ,EAAE,QAAQ,EAAE,EAAE;IACrB,OAAO,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,KAAK,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC;AAC/D,CAAC,CACF,CAAC;AAEF,MAAM,CAAC,MAAM,UAAU,GAAG,CAAC,IAAI,GAAG,IAAI,EAAE,EAAE;IACxC,IAAI,CAAC,IAAI,EAAE,CAAC;QACV,OAAO;IACT,CAAC;IACD,MAAM,KAAK,GAAG,IAAI,WAAW,CAAC,cAAc,EAAE;QAC5C,OAAO,EAAE,IAAI;KACd,CAAC,CAAC;IACH,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;AAChC,CAAC,CAAC;AAEF,MAAM,EAAE,EAAE,EAAE,GAAG,KAAK,CAAC;AACrB,EAAE,CAAC,KAAK,EAAE,CAAC,GAAG,EAAE,QAAQ,EAAE,EAAE;IAC1B,IAAI,GAAG,KAAK,MAAM;QAAE,OAAO,CAAC,2BAA2B;IAEvD,IAAI,QAAQ,aAAR,QAAQ,uBAAR,QAAQ,CAAE,IAAI,EAAE,CAAC;QACnB,KAAK,CAAC,EAAE,CAAC,aAAa,EAAE,UAAU,CAAC,EAAE,WAAW,CAAC,CAAC;IACpD,CAAC;SAAM,CAAC;QACN,KAAK,CAAC,EAAE,CAAC,aAAa,EAAE,UAAU,CAAC,EAAE,WAAW,CAAC,CAAC;IACpD,CAAC;AACH,CAAC,CAAC,CAAC;AAEH,MAAM,CAAC,EAAE,GAAG;IACV,GAAG,CAAC,CAAA,MAAM,aAAN,MAAM,uBAAN,MAAM,CAAE,EAAE,KAAI,EAAE,CAAC;IACrB,IAAI,EAAE;QACJ,GAAG,CAAC,CAAA,MAAA,MAAM,aAAN,MAAM,uBAAN,MAAM,CAAE,EAAE,0CAAE,IAAI,KAAI,EAAE,CAAC;QAC3B,MAAM,EAAE,UAAU;KACnB;CACF,CAAC;AAEF,OAAO,EAAE,EAAE,EAAE,CAAC;AACd,eAAe,KAAK,CAAC","sourcesContent":["import { createStore } from '@stencil/store';\nimport { speak } from '@wordpress/a11y';\nimport { __ } from '@wordpress/i18n';\n\nexport const store = createStore<any>(\n  () => ({\n    cart: {\n      open: false,\n    },\n  }),\n  (newValue, oldValue) => {\n    return JSON.stringify(newValue) !== JSON.stringify(oldValue);\n  },\n);\n\nexport const toggleCart = (open = null) => {\n  if (!open) {\n    return;\n  }\n  const event = new CustomEvent('scToggleCart', {\n    bubbles: true,\n  });\n  document.dispatchEvent(event);\n};\n\nconst { on } = store;\non('set', (key, newState) => {\n  if (key !== 'cart') return; // we only care about cart.\n\n  if (newState?.open) {\n    speak(__('Cart Opened', 'surecart'), 'assertive');\n  } else {\n    speak(__('Cart Closed', 'surecart'), 'assertive');\n  }\n});\n\nwindow.sc = {\n  ...(window?.sc || {}),\n  cart: {\n    ...(window?.sc?.cart || {}),\n    toggle: toggleCart,\n  },\n};\n\nexport { on };\nexport default store;\n"]}