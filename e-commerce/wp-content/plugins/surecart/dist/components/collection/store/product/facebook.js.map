{"version":3,"file":"facebook.js","sourceRoot":"","sources":["../../../src/store/product/facebook.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,kBAAkB,EAAE,MAAM,0BAA0B,CAAC;AAG9D;;GAEG;AACH,MAAM,CAAC,gBAAgB,CAAC,YAAY,EAAE,UAAU,CAAc;;IAC5D,IAAI,CAAC,CAAA,MAAM,aAAN,MAAM,uBAAN,MAAM,CAAE,GAAG,CAAA;QAAE,OAAO;IAEzB,MAAM,WAAW,GAA2B,CAAC,CAAC,MAAM,CAAC;IAErD,MAAM,CAAC,GAAG,CAAC,OAAO,EAAE,QAAQ,EAAE;QAC5B,aAAa,EAAE,WAAW,CAAC,YAAY;QACvC,WAAW,EAAE,WAAW,CAAC,eAAe;QACxC,GAAG,CAAC,CAAC,CAAC,CAAA,MAAA,WAAW,aAAX,WAAW,uBAAX,WAAW,CAAE,iBAAiB,0CAAE,MAAM,CAAA,CAAC,CAAC,CAAC,EAAE,gBAAgB,EAAE,WAAW,CAAC,iBAAiB,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC;KACnH,CAAC,CAAC;AACL,CAAC,CAAC,CAAC;AAEH;;GAEG;AACH,MAAM,CAAC,gBAAgB,CAAC,iBAAiB,EAAE,UAAU,CAAc;;IACjE,IAAI,CAAC,CAAA,MAAM,aAAN,MAAM,uBAAN,MAAM,CAAE,GAAG,CAAA;QAAE,OAAO;IAEzB,MAAM,OAAO,GAAG,CAAC,CAAC,MAAM,CAAC;IAEzB,MAAM,CAAC,GAAG,CAAC,OAAO,EAAE,aAAa,EAAE;QACjC,WAAW,EAAE,CAAC,OAAO,CAAC,EAAE,CAAC;QACzB,gBAAgB,EAAE,MAAA,MAAA,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,mBAAmB,0CAAE,IAAI,0CAAE,GAAG,CAAC,UAAU,CAAC,EAAE,CAAC,UAAU,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC;QACnG,YAAY,EAAE,CAAA,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,IAAI,IAAG,CAAC,CAAA,MAAA,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,eAAe,0CAAE,MAAM,EAAC,CAAC,CAAC,MAAM,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,eAAe,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC;QACpH,YAAY,EAAE,SAAS;QACvB,QAAQ,EAAE;YACR;gBACE,EAAE,EAAE,OAAO,CAAC,EAAE;gBACd,QAAQ,EAAE,CAAC;aACZ;SACF;QACD,QAAQ,EAAE,MAAA,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,KAAK,0CAAE,QAAQ;QAClC,KAAK,EAAE,kBAAkB,CAAC,CAAA,MAAA,OAAO,CAAC,KAAK,0CAAE,MAAM,KAAI,CAAC,EAAE,CAAA,MAAA,OAAO,CAAC,KAAK,0CAAE,QAAQ,KAAI,KAAK,CAAC;KACxF,CAAC,CAAC;AACL,CAAC,CAAC,CAAC","sourcesContent":["import { maybeConvertAmount } from '../../functions/currency';\nimport { ProductsSearchedParams } from 'src/types';\n\n/**\n * Handle search event.\n */\nwindow.addEventListener('scSearched', function (e: CustomEvent) {\n  if (!window?.fbq) return;\n\n  const eventDetail: ProductsSearchedParams = e.detail;\n\n  window.fbq('track', 'Search', {\n    search_string: eventDetail.searchString,\n    content_ids: eventDetail.searchResultIds,\n    ...(!!eventDetail?.searchCollections?.length ? { content_category: eventDetail.searchCollections.join(',') } : {}),\n  });\n});\n\n/**\n * Handle view content event.\n */\nwindow.addEventListener('scProductViewed', function (e: CustomEvent) {\n  if (!window?.fbq) return;\n\n  const product = e.detail;\n\n  window.fbq('track', 'ViewContent', {\n    content_ids: [product.id],\n    content_category: product?.product_collections?.data?.map(collection => collection.name).join(', '),\n    content_name: product?.name + (product?.variant_options?.length ? ` - ${product?.variant_options.join(' / ')}` : ''),\n    content_type: 'product',\n    contents: [\n      {\n        id: product.id,\n        quantity: 1,\n      },\n    ],\n    currency: product?.price?.currency,\n    value: maybeConvertAmount(product.price?.amount || 0, product.price?.currency || 'USD'),\n  });\n});\n"]}