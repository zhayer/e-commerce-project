{"version":3,"file":"sc-line-items.js","sourceRoot":"","sources":["../../../../../src/components/controllers/checkout-form/line-items/sc-line-items.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, h, Prop } from '@stencil/core';\nimport { __ } from '@wordpress/i18n';\n\nimport { state as checkoutState } from '@store/checkout';\nimport { hasSubscription } from '../../../../functions/line-items';\nimport { intervalString } from '../../../../functions/price';\nimport { LineItem, Product, Variant } from '../../../../types';\nimport { removeCheckoutLineItem, updateCheckoutLineItem } from '@store/checkout/mutations';\nimport { formBusy } from '@store/form/getters';\nimport { getMaxStockQuantity } from '../../../../functions/quantity';\n\n/**\n * @part base - The component base\n * @part line-item - The line item\n * @part product-line-item - The product line item\n * @part line-item__image - The line item image\n * @part line-item__text - The line item text\n * @part line-item__title - The line item title\n * @part line-item__suffix - The line item suffix\n * @part line-item__price - The line item price\n * @part line-item__price-amount - The line item price amount\n * @part line-item__price-description - The line item price description\n * @part line-item__price-scratch - The line item price scratch\n * @part line-item__static-quantity - The line item static quantity\n * @part line-item__remove-icon - The line item remove icon\n * @part line-item__quantity - The line item quantity\n * @part line-item__quantity-minus - The line item quantity minus\n * @part line-item__quantity-minus-icon - The line item quantity minus icon\n * @part line-item__quantity-plus - The line item quantity plus\n * @part line-item__quantity-plus-icon - The line item quantity plus icon\n * @part line-item__quantity-input - The line item quantity input\n * @part line-item__price-description - The line item price description\n */\n\n@Component({\n  tag: 'sc-line-items',\n  styleUrl: 'sc-line-items.css',\n  shadow: true,\n})\nexport class ScLineItems {\n  /**\n   * Is the line item editable?\n   */\n  @Prop() editable: boolean;\n\n  /**\n   * Is the line item removable?\n   */\n  @Prop() removable: boolean;\n\n  /**\n   * Is the line item editable?\n   */\n  isEditable(item: LineItem) {\n    // ad_hoc prices and bumps cannot have quantity.\n    if (item?.price?.ad_hoc || item?.bump_amount || item?.locked) {\n      return false;\n    }\n    return this.editable;\n  }\n\n  render() {\n    if (!!formBusy() && !checkoutState?.checkout?.line_items?.data?.length) {\n      return (\n        <sc-line-item>\n          <sc-skeleton style={{ 'width': '50px', 'height': '50px', '--border-radius': '0' }} slot=\"image\"></sc-skeleton>\n          <sc-skeleton slot=\"title\" style={{ width: '120px', display: 'inline-block' }}></sc-skeleton>\n          <sc-skeleton slot=\"description\" style={{ width: '60px', display: 'inline-block' }}></sc-skeleton>\n          <sc-skeleton style={{ width: '120px', display: 'inline-block' }} slot=\"price\"></sc-skeleton>\n          <sc-skeleton style={{ width: '60px', display: 'inline-block' }} slot=\"price-description\"></sc-skeleton>\n        </sc-line-item>\n      );\n    }\n\n    return (\n      <div class=\"line-items\" part=\"base\" tabindex=\"0\">\n        {(checkoutState?.checkout?.line_items?.data || []).map(item => {\n          const max = getMaxStockQuantity(item?.price?.product as Product, item?.variant as Variant);\n          return (\n            <div class=\"line-item\">\n              <sc-product-line-item\n                key={item.id}\n                image={item?.image}\n                name={(item?.price?.product as Product)?.name}\n                priceName={item?.price?.name}\n                variantLabel={(item?.variant_options || []).filter(Boolean).join(' / ') || null}\n                purchasableStatusDisplay={item?.purchasable_status_display}\n                {...(max ? { max } : {})}\n                editable={this.isEditable(item)}\n                removable={!item?.locked && this.removable}\n                quantity={item.quantity}\n                fees={item?.fees?.data}\n                setupFeeTrialEnabled={item?.price?.setup_fee_trial_enabled}\n                amount={item.ad_hoc_amount !== null ? item.ad_hoc_amount : item.subtotal_amount}\n                scratchAmount={item.ad_hoc_amount == null && item?.scratch_amount}\n                currency={checkoutState?.checkout?.currency}\n                trialDurationDays={item?.price?.trial_duration_days}\n                interval={!!item?.price && intervalString(item?.price, { showOnce: hasSubscription(checkoutState?.checkout) })}\n                onScUpdateQuantity={e => updateCheckoutLineItem({ id: item.id, data: { quantity: e.detail } })}\n                onScRemove={() => removeCheckoutLineItem(item?.id)}\n                exportparts=\"base:line-item, product-line-item, image:line-item__image, text:line-item__text, title:line-item__title, suffix:line-item__suffix, price:line-item__price, price__amount:line-item__price-amount, price__description:line-item__price-description, price__scratch:line-item__price-scratch, static-quantity:line-item__static-quantity, remove-icon__base:line-item__remove-icon, quantity:line-item__quantity, quantity__minus:line-item__quantity-minus, quantity__minus-icon:line-item__quantity-minus-icon, quantity__plus:line-item__quantity-plus, quantity__plus-icon:line-item__quantity-plus-icon, quantity__input:line-item__quantity-input, line-item__price-description:line-item__price-description\"\n              />\n            </div>\n          );\n        })}\n      </div>\n    );\n  }\n}\n"]}