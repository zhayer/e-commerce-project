{"version":3,"file":"sc-subscription-switch.js","sourceRoot":"","sources":["../../../../../src/components/controllers/dashboard/subscription-switch/sc-subscription-switch.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, Element, Fragment, h, Prop, State, Watch } from '@stencil/core';\nimport { __ } from '@wordpress/i18n';\nimport { addQueryArgs } from '@wordpress/url';\n\nimport apiFetch from '../../../../functions/fetch';\nimport { onFirstVisible } from '../../../../functions/lazy';\nimport { intervalString } from '../../../../functions/price';\nimport { Price, Product, ProductGroup, Subscription } from '../../../../types';\n\n@Component({\n  tag: 'sc-subscription-switch',\n  styleUrl: 'sc-subscription-switch.scss',\n  shadow: true,\n})\nexport class ScSubscriptionSwitch {\n  @Element() el: HTMLScSubscriptionsListElement;\n  /** Customer id to fetch subscriptions */\n  @Prop() query: object;\n  @Prop() heading: string;\n  @Prop() productGroupId: ProductGroup;\n  @Prop() productId: string;\n  @Prop() subscription: Subscription;\n  @Prop() filterAbove: number = 4;\n  @Prop() successUrl: string = window.location.href;\n\n  /** The currently selected price. */\n  @State() selectedPrice: Price;\n\n  /** Holds the products */\n  @State() products: Array<Product> = [];\n\n  /** Holds the prices */\n  @State() prices: Array<Price>;\n\n  /** Filter state */\n  @State() filter: 'month' | 'week' | 'year' | 'never' | 'split' = 'month';\n\n  @State() hasFilters: {\n    split: boolean;\n    month: boolean;\n    week: boolean;\n    year: boolean;\n    never: boolean;\n  };\n\n  @State() showFilters: boolean;\n\n  /** Loading state */\n  @State() loading: boolean;\n\n  /** Busy state */\n  @State() busy: boolean;\n\n  /** Error message */\n  @State() error: string;\n\n  componentWillLoad() {\n    onFirstVisible(this.el, async () => {\n      try {\n        this.loading = true;\n        await Promise.all([this.getGroup(), this.getProductPrices()]);\n      } catch (e) {\n        console.error(e);\n        if (e?.message) {\n          this.error = e.message;\n        } else {\n          this.error = __('Something went wrong', 'surecart');\n        }\n      } finally {\n        this.loading = false;\n      }\n    });\n    this.handleSubscriptionChange();\n  }\n\n  @Watch('products')\n  handleProductsChange() {\n    this.prices = this.products\n      .map(product => (product as Product)?.prices?.data)\n      .flat()\n      .filter((v, i, a) => a.findIndex(t => t.id === v.id) === i) // remove duplicates.\n      .filter(price => !price?.archived) // remove archived\n      .filter(price => price.portal_subscription_update_enabled); // only show prices that can be upgraded to.\n\n    this.showFilters = this.prices?.length > this.filterAbove;\n  }\n\n  @Watch('prices')\n  handlePricesChange(val, prev) {\n    if (!prev?.length && val?.length) {\n      this.selectedPrice = val.find(price => price.id === (this.subscription?.price as Price)?.id);\n    }\n\n    this.hasFilters = {\n      ...this.hasFilters,\n      split: this.prices.some(price => !!price?.recurring_period_count && !price?.archived),\n      month: this.prices.some(price => price.recurring_interval === 'month' && !price?.recurring_period_count && !price?.archived),\n      year: this.prices.some(price => price.recurring_interval === 'year' && !price?.recurring_period_count && !price?.archived),\n      never: this.prices.some(price => (price.recurring_interval === 'never' || !price.recurring_interval) && !price?.archived),\n    };\n  }\n\n  @Watch('subscription')\n  handleSubscriptionChange() {\n    this.filter = (this.subscription?.price as Price)?.recurring_interval || 'month';\n  }\n\n  hasMultipleFilters() {\n    return Object.values(this.hasFilters || {}).filter(v => !!v).length > 1;\n  }\n\n  /** Get all subscriptions */\n  async getGroup() {\n    if (!this.productGroupId) return;\n    const products = (await await apiFetch({\n      path: addQueryArgs(`surecart/v1/products/`, {\n        product_group_ids: [this.productGroupId],\n        expand: ['prices'],\n        ...this.query,\n      }),\n    })) as Product[];\n    this.products = [...this.products, ...products];\n  }\n\n  /** Get the product's prices. */\n  async getProductPrices() {\n    if (!this.productId) return;\n    const product = (await await apiFetch({\n      path: addQueryArgs(`surecart/v1/products/${this.productId}`, {\n        expand: ['prices'],\n      }),\n    })) as Product;\n    this.products = [...this.products, ...[product]];\n  }\n\n  async handleSubmit(e) {\n    const { plan } = await e.target.getFormJson();\n    const price = this.prices.find(p => p.id === plan);\n    const currentPlan = this.subscription?.price as Price;\n    if (price?.id === currentPlan.id && !price?.ad_hoc && !this.subscription?.variant_options?.length) return;\n\n    // confirm product variation.\n    if (this.subscription?.variant_options?.length) {\n      this.busy = true;\n      return window.location.assign(\n        addQueryArgs(this.successUrl, {\n          action: 'confirm_variation',\n          price_id: plan,\n          ...(this.subscription?.live_mode === false ? { live_mode: false } : {}),\n        }),\n      );\n    }\n\n    // confirm ad_hoc amount.\n    if (price?.ad_hoc) {\n      this.busy = true;\n      return window.location.assign(\n        addQueryArgs(this.successUrl, {\n          action: 'confirm_amount',\n          price_id: plan,\n          ...(this.subscription?.live_mode === false ? { live_mode: false } : {}),\n        }),\n      );\n    }\n\n    // confirm plan.\n    this.busy = true;\n    window.location.assign(\n      addQueryArgs(this.successUrl, {\n        action: 'confirm',\n        price_id: plan,\n        ...(this.subscription?.live_mode === false ? { live_mode: false } : {}),\n      }),\n    );\n  }\n\n  renderSwitcher() { \n    if (!this.hasMultipleFilters()) return;\n    if (!this.showFilters) return;\n\n    return (\n      <sc-flex slot=\"end\" class=\"subscriptions-switch__switcher\">\n        {this.hasFilters.month && (\n          <sc-button onClick={() => (this.filter = 'month')} size=\"small\" type={this.filter === 'month' ? 'default' : 'text'}>\n            {__('Monthly', 'surecart')}\n          </sc-button>\n        )}\n        {this.hasFilters.week && (\n          <sc-button onClick={() => (this.filter = 'week')} size=\"small\" type={this.filter === 'week' ? 'default' : 'text'}>\n            {__('Weekly', 'surecart')}\n          </sc-button>\n        )}\n        {this.hasFilters.year && (\n          <sc-button onClick={() => (this.filter = 'year')} size=\"small\" type={this.filter === 'year' ? 'default' : 'text'}>\n            {__('Yearly', 'surecart')}\n          </sc-button>\n        )}\n        {this.hasFilters.never && (\n          <sc-button onClick={() => (this.filter = 'never')} size=\"small\" type={this.filter === 'never' ? 'default' : 'text'}>\n            {__('Lifetime', 'surecart')}\n          </sc-button>\n        )}\n        {this.hasFilters.split && (\n          <sc-button onClick={() => (this.filter = 'split')} size=\"small\" type={this.filter === 'split' ? 'default' : 'text'}>\n            {__('Payment Plan', 'surecart')}\n          </sc-button>\n        )}\n      </sc-flex>\n    );\n  }\n\n  renderLoading() {\n    return (\n      <sc-choice name=\"loading\" disabled>\n        <sc-skeleton style={{ width: '60px', display: 'inline-block' }}></sc-skeleton>\n        <sc-skeleton style={{ width: '80px', display: 'inline-block' }} slot=\"price\"></sc-skeleton>\n        <sc-skeleton style={{ width: '120px', display: 'inline-block' }} slot=\"description\"></sc-skeleton>\n      </sc-choice>\n    );\n  }\n\n  /** Is the price hidden or not */\n  isHidden(price: Price) {\n    // don't hide if no filters or has no multiple filters available.\n    if (!this.showFilters || !this.hasMultipleFilters()) return false;\n\n    // hide if the filter does not match the recurring interval.\n    let hidden = this.filter !== price.recurring_interval;\n\n    // if filter is never, show prices with non-recurring interval.\n    if (this.filter === 'never' && !price?.recurring_interval) {\n      hidden = false;\n    }\n\n    // if filter is split, show prices with a recurring_period_count.\n    if (this.filter === 'split' && price?.recurring_period_count) {\n      hidden = false;\n    }\n\n    return hidden;\n  }\n\n  renderContent() {\n    if (this.loading) {\n      return this.renderLoading();\n    }\n\n    return (\n      <sc-choices required>\n        <div>\n          {(this.prices || [])\n            .filter(price => !price.archived)\n            .filter(price => price?.currency === this.subscription?.currency)\n            .sort((a, b) => a.amount - b.amount)\n            .map(price => {\n              const currentPlan = (this.subscription?.price as Price)?.id === price?.id;\n              const product = this.products.find(product => product.id === price?.product);\n\n              return (\n                <sc-choice\n                  key={price?.id}\n                  checked={currentPlan}\n                  name=\"plan\"\n                  value={price?.id}\n                  hidden={this.isHidden(price)}\n                  onScChange={e => {\n                    if (e.detail) {\n                      this.selectedPrice = this.prices.find(p => p.id === price?.id);\n                    }\n                  }}\n                >\n                  <div>\n                    <strong>\n                      {product?.name} {price?.name && <Fragment> â€” {price?.name}</Fragment>}\n                    </strong>\n                  </div>\n                  <div slot=\"description\">\n                    {price?.ad_hoc ? (\n                      `${__('Custom amount', 'surecart')} ${intervalString(price)}`\n                    ) : (\n                      <Fragment>\n                        <sc-format-number type=\"currency\" currency={price?.currency || 'usd'} value={price?.amount}></sc-format-number> {intervalString(price, { showOnce: true })}\n                      </Fragment>\n                    )}\n                  </div>\n                  {currentPlan && (\n                    <sc-tag type=\"warning\" slot=\"price\">\n                      {__('Current Plan', 'surecart')}\n                    </sc-tag>\n                  )}\n                </sc-choice>\n              );\n            })}\n        </div>\n      </sc-choices>\n    );\n  }\n\n  buttonText() {\n    if (this.subscription?.variant_options?.length) {\n      if (this.selectedPrice?.id === (this.subscription?.price as Price)?.id) {\n        return __('Update Options', 'surecart');\n      } else {\n        return __('Choose Options', 'surecart');\n      }\n    }\n\n    if (this.selectedPrice?.ad_hoc) {\n      if (this.selectedPrice?.id === (this.subscription?.price as Price)?.id) {\n        return __('Update Amount', 'surecart');\n      } else {\n        return __('Choose Amount', 'surecart');\n      }\n    }\n    return __('Next', 'surecart');\n  }\n\n  buttonDisabled() {\n    if (this.subscription?.variant_options) {\n      return false;\n    }\n    return (this.subscription?.price as Price)?.id === this.selectedPrice?.id && !this.selectedPrice?.ad_hoc;\n  }\n\n  render() {\n    // we are not loading and we don't have enough prices to switch.\n    if (!this.loading && this.prices?.length < 2) {\n      if (!this.prices?.[0]?.ad_hoc && !this.subscription?.variant_options?.length) {\n        return null;\n      }\n    }\n\n    // subscription is a payment plan.\n    if (this.subscription?.finite) {\n      return (\n        <sc-alert type=\"info\" open>\n          {__('To make changes to your payment plan, please contact us.', 'surecart')}\n        </sc-alert>\n      );\n    }\n\n    return (\n      <sc-dashboard-module heading={this.heading || __('Update Plan', 'surecart')} class=\"subscription-switch\" error={this.error}>\n        <span slot=\"end\">{this.renderSwitcher()}</span>\n        <sc-form class=\"subscriptions-switch\" onScFormSubmit={e => this.handleSubmit(e)}>\n          {this.renderContent()}\n\n          <sc-button type=\"primary\" full submit loading={this.loading || this.busy} disabled={this.buttonDisabled()}>\n            {this.buttonText()} <sc-icon name=\"arrow-right\" slot=\"suffix\"></sc-icon>\n          </sc-button>\n\n          {this.busy && <sc-block-ui style={{ zIndex: '9' }}></sc-block-ui>}\n        </sc-form>\n      </sc-dashboard-module>\n    );\n  }\n}\n"]}