{"version":3,"file":"sc-subscription-details.js","sourceRoot":"","sources":["../../../../../src/components/controllers/dashboard/subscription-details/sc-subscription-details.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, h, Prop, State, Watch } from '@stencil/core';\nimport { __, sprintf } from '@wordpress/i18n';\nimport { addQueryArgs } from '@wordpress/url';\n\nimport apiFetch from '../../../../functions/fetch';\nimport { intervalString } from '../../../../functions/price';\nimport { License, Price, Product, Purchase, Subscription } from '../../../../types';\nimport { productNameWithPrice } from '../../../../functions/price';\nimport { formatNumber } from '../../../../../../admin/util';\n@Component({\n  tag: 'sc-subscription-details',\n  styleUrl: 'sc-subscription-details.css',\n  shadow: true,\n})\nexport class ScSubscriptionDetails {\n  @Prop() subscription: Subscription;\n  @Prop() pendingPrice: Price;\n  @Prop() hideRenewalText: boolean;\n\n  @State() activationsModal: boolean;\n  @State() loading: boolean;\n  @State() hasPendingUpdate: boolean;\n\n  renderName() {\n    if (typeof this.subscription?.price?.product !== 'string') {\n      return productNameWithPrice(this.subscription?.price);\n    }\n    return __('Subscription', 'surecart');\n  }\n\n  @Watch('subscription')\n  async handleSubscriptionChange() {\n    this.hasPendingUpdate = !!Object.keys(this?.subscription?.pending_update || {})?.length;\n    if (this?.subscription?.pending_update?.price && !this?.pendingPrice && !this.hideRenewalText) {\n      this.pendingPrice = await this.fetchPrice(this.subscription.pending_update.price);\n    }\n  }\n\n  componentWillLoad() {\n    this.handleSubscriptionChange();\n  }\n\n  async fetchPrice(price_id: string) {\n    try {\n      this.loading = true;\n      const price = await apiFetch({\n        path: addQueryArgs(`surecart/v1/prices/${price_id}`, {\n          expand: ['product'],\n        }),\n      });\n      return price as Price;\n    } catch (e) {\n      console.error(e);\n    } finally {\n      this.loading = false;\n    }\n  }\n\n  renderRenewalText() {\n    const tag = <sc-subscription-status-badge subscription={this?.subscription}></sc-subscription-status-badge>;\n\n    if (this?.subscription?.cancel_at_period_end && this?.subscription?.current_period_end_at) {\n      return (\n        <span\n          aria-label={sprintf(\n            /* translators: %s: current period end date */\n            __('Renewal Update - Your plan will be canceled on %s', 'surecart'), this.subscription.current_period_end_at_date)\n          }>\n          {tag} {' '}\n          {\n            /* translators: %s: current period end date */\n            sprintf(__('Your plan will be canceled on %s', 'surecart'), this.subscription.current_period_end_at_date)\n          }\n        </span>\n      );\n    }\n\n    if (this.hasPendingUpdate) {\n      if (!this.pendingPrice && !this.subscription?.pending_update?.ad_hoc_amount) {\n        return <sc-skeleton></sc-skeleton>;\n      }\n\n      if (this.subscription?.pending_update?.ad_hoc_amount) {\n        return (\n          <span\n            aria-label={sprintf(\n              /* translators: 1: new price, 2: current period end date */\n              __('Renewal Update - Your plan switches to %1s on %2s', 'surecart'),\n              formatNumber(this.subscription?.pending_update?.ad_hoc_amount, this.pendingPrice?.currency || this.subscription?.price?.currency),\n              this.subscription.current_period_end_at_date,\n            )}\n          >\n            {__('Your plan switches to', 'surecart')}{' '}\n            <strong>\n              <sc-format-number\n                type=\"currency\"\n                currency={this.pendingPrice?.currency || this.subscription?.price?.currency}\n                value={this.subscription?.pending_update?.ad_hoc_amount}\n              ></sc-format-number>{' '}\n              {intervalString(this.pendingPrice || this.subscription?.price)}\n            </strong>{' '}\n            {__('on', 'surecart')} {this.subscription.current_period_end_at_date}\n          </span>\n        );\n      }\n      return (\n        <span\n          aria-label={sprintf(\n            /* translators: 1: new plan name, 2: current period end date */\n            __('Renewal Update - Your plan switches to %1s on %2s', 'surecart'),\n            (this.pendingPrice.product as Product).name,\n            this.subscription.current_period_end_at_date,\n          )}\n        >\n          {__('Your plan switches to', 'surecart')} <strong>{(this.pendingPrice.product as Product).name}</strong> {__('on', 'surecart')}{' '}\n          {this.subscription.current_period_end_at_date}\n        </span>\n      );\n    }\n\n    if (this?.subscription?.status === 'trialing' && this?.subscription?.trial_end_at) {\n      return (\n        <span\n          aria-label={sprintf(\n            /* translators: %s: trial end date */\n            __('Renewal Update - Your plan begins on %s.', 'surecart'), this.subscription.trial_end_at_date)\n          }>\n          {tag}{' '}\n          {sprintf(\n            /* translators: %s: trial end date */\n            __('Your plan begins on %s', 'surecart'), this?.subscription?.trial_end_at_date)\n          }\n        </span>\n      );\n    }\n    if (this.subscription?.status === 'active' && this.subscription?.current_period_end_at) {\n      return (\n        <span\n          aria-label={sprintf(\n            /* translators: %s: current period end date */\n            __('Renewal Update - Your next payment is on %s', 'surecart'), this.subscription.current_period_end_at_date)\n          }>\n          {tag}{' '}\n          {\n            this.subscription?.remaining_period_count === null ? (\n              /* translators: %s: current period end date */\n              sprintf(__('Your plan renews on %s', 'surecart'), this.subscription.current_period_end_at_date)\n            ) : (\n              /* translators: %s: current period end date */\n              sprintf(__('Your next payment is on %s', 'surecart'), this.subscription.current_period_end_at_date)\n            )\n          }\n        </span>\n      );\n    }\n\n    return tag;\n  }\n\n  getActivations() {\n    return (((this.subscription?.purchase as Purchase)?.license as License)?.activations?.data || []).filter(activation => {\n      return activation?.counted;\n    });\n  }\n\n  renderActivations() {\n    const activations = this.getActivations();\n    if (!activations?.length) return null;\n    return (\n      <sc-flex justifyContent=\"flex-start\" alignItems=\"center\">\n        <sc-tag size=\"small\">{activations?.[0]?.name}</sc-tag>\n        {activations?.length > 1 && (\n          <sc-text\n            style={{ '--font-size': 'var(--sc-font-size-small)', 'cursor': 'pointer' }}\n            onClick={e => {\n              e.preventDefault();\n              e.stopImmediatePropagation();\n              this.activationsModal = true;\n            }}\n          >\n            + {activations?.length - 1} More\n          </sc-text>\n        )}\n      </sc-flex>\n    );\n  }\n\n  showWarning() {\n    // no payment method.\n    if (this.subscription?.payment_method || this.subscription.manual_payment) {\n      return false;\n    }\n    // don't show if not looking for payment.\n    if (!['active', 'past_due', 'unpaid', 'incomplete'].includes(this.subscription?.status)) {\n      return false;\n    }\n    // handle ad_hoc.\n    if (this.subscription?.price?.ad_hoc) {\n      return this.subscription?.ad_hoc_amount !== 0;\n    }\n    // show the warning if the subscription is not free.\n    return this.subscription?.price?.amount !== 0;\n  }\n\n  render() {\n    return (\n      <div class=\"subscription-details\">\n        {this.hasPendingUpdate && (\n          <div>\n            <sc-tag size=\"small\" type=\"warning\">\n              {__('Update Scheduled', 'surecart')}\n            </sc-tag>\n          </div>\n        )}\n\n        <sc-flex alignItems=\"center\" justifyContent=\"flex-start\">\n          <sc-text\n            aria-label={sprintf(\n              /* translators: %s: plan name */\n              __('Plan name - %s', 'surecart'), this.renderName())\n            } style={{ '--font-weight': 'var(--sc-font-weight-bold)' }}>\n            {this.renderName()}\n          </sc-text>\n          {this.renderActivations()}\n        </sc-flex>\n\n        {!this.hideRenewalText && <div>{this.renderRenewalText()} </div>}\n\n        <slot />\n\n        <sc-dialog label={__('Activations', 'surecart')} onScRequestClose={() => (this.activationsModal = false)} open={!!this.activationsModal}>\n          <sc-card no-padding style={{ '--overflow': 'hidden' }}>\n            <sc-stacked-list>\n              {(this.getActivations() || []).map(activation => {\n                return (\n                  <sc-stacked-list-row style={{ '--columns': '2' }} mobileSize={0}>\n                    <sc-text style={{ '--line-height': 'var(--sc-line-height-dense)' }}>\n                      <strong>{activation?.name}</strong>\n                      <div>\n                        <sc-text style={{ '--color': 'var(--sc-color-gray-500)' }}>{activation?.fingerprint}</sc-text>\n                      </div>\n                    </sc-text>\n                    <sc-text style={{ '--color': 'var(--sc-color-gray-500)' }}>{activation?.created_at_date}</sc-text>\n                  </sc-stacked-list-row>\n                );\n              })}\n            </sc-stacked-list>\n          </sc-card>\n        </sc-dialog>\n\n        {this.showWarning() && (\n          <div>\n            <sc-tag type=\"warning\">\n              <div class=\"subscription-details__missing-method\">\n                <sc-icon name=\"alert-triangle\"></sc-icon>\n                {__('Payment Method Missing', 'surecart')}\n              </div>\n            </sc-tag>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n"]}