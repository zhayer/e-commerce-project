{"version":3,"file":"sc-image-slider.js","sourceRoot":"","sources":["../../../../src/components/ui/sc-image-slider/sc-image-slider.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, Prop, State, Watch, h } from '@stencil/core';\nimport { __, sprintf } from '@wordpress/i18n';\nimport Swiper from 'swiper';\nimport { Navigation } from 'swiper/modules';\n\n@Component({\n  tag: 'sc-image-slider',\n  styleUrl: 'sc-image-slider.scss',\n  shadow: true,\n})\nexport class ScImageSlider {\n  private swiperThumbsRef?: HTMLDivElement;\n  private swiperContainerRef?: HTMLDivElement;\n  private previous: HTMLButtonElement;\n  private next: HTMLButtonElement;\n  private swiper: Swiper;\n  private thumbsSwiper: Swiper;\n\n  /** Accept a string or an array of objects */\n  @Prop() images: string | { src: string; alt: string; srcset; width: number; height: number; sizes: string; title: string }[];\n  @Prop() thumbnails: string | { src: string; alt: string; srcset; width: number; height: number; sizes: string; title: string }[] = [];\n  @Prop() hasThumbnails: boolean;\n  @Prop() thumbnailsPerPage: number = 5;\n  @Prop() autoHeight: boolean;\n\n  /** Current Slide Index */\n  @State() currentSliderIndex: number = 0;\n  @State() imagesData: { src: string; alt: string; srcset; width: number; height: number; sizes: string; title: string }[] = [];\n  @State() thumbnailsData: { src: string; alt: string; srcset; width: number; height: number; sizes: string; title: string }[] = [];\n\n  @Watch('currentSliderIndex')\n  handleThumbPaginate() {\n    if (!this.thumbsSwiper) return;\n    const slideInView = this.currentSliderIndex >= this.thumbsSwiper.activeIndex && this.currentSliderIndex < this.thumbsSwiper.activeIndex + this.thumbnailsPerPage;\n    if (!slideInView) {\n      this.thumbsSwiper.slideTo(this.currentSliderIndex);\n    }\n  }\n\n  @Watch('images')\n  parseImages(newValue: string | { src: string; alt: string }[]) {\n    if (newValue) this.imagesData = typeof newValue == 'string' ? JSON.parse(newValue) : newValue;\n  }\n\n  @Watch('thumbnails')\n  parseThumnails(newValue: string | { src: string; alt: string }[]) {\n    if (newValue) this.thumbnailsData = typeof newValue == 'string' ? JSON.parse(newValue) : newValue;\n  }\n\n  componentWillLoad() {\n    this.parseImages(this.images);\n    this.parseThumnails(this.thumbnails);\n  }\n\n  componentDidUpdate() {\n    this.swiper.update();\n  }\n\n  componentDidLoad() {\n    if (this.swiperContainerRef) {\n      this.swiper = new Swiper(this.swiperContainerRef, {\n        direction: 'horizontal',\n        loop: false,\n        autoHeight: this.autoHeight,\n        centeredSlides: true,\n        on: {\n          slideChange: swiper => {\n            this.currentSliderIndex = swiper.activeIndex;\n          },\n        },\n      });\n    }\n    if (this.swiperThumbsRef) {\n      this.thumbsSwiper = new Swiper(this.swiperThumbsRef, {\n        modules: [Navigation],\n        direction: 'horizontal',\n        loop: false,\n        slidesPerView: this.thumbnailsPerPage,\n        slidesPerGroup: this.thumbnailsPerPage,\n        spaceBetween: 10,\n        centerInsufficientSlides: true,\n        slideToClickedSlide: true,\n        navigation: {\n          nextEl: this.next,\n          prevEl: this.previous,\n        },\n      });\n    }\n  }\n\n  disconnectedCallback() {\n    this.swiper.destroy(true, true);\n    if (this.thumbsSwiper) {\n      this.thumbsSwiper.destroy(true, true);\n    }\n  }\n\n  render() {\n    const thumbnails = this.thumbnailsData?.length ? this.thumbnailsData : this.imagesData;\n    return (\n      <div class={{ 'image-slider': true, 'image-slider--is-fixed-height': !this.autoHeight }} part=\"base\">\n        <div class=\"swiper\" ref={el => (this.swiperContainerRef = el)}>\n          <div class=\"swiper-wrapper\">\n            {(this.imagesData || []).map(({ src, alt, srcset, width, height, sizes, title }, index) => (\n              <div key={index} class=\"swiper-slide image-slider__slider\">\n                <div class=\"swiper-slide-img\">\n                  <img src={src} alt={alt} srcset={srcset} width={width} height={height} sizes={sizes} loading={index > 0 ? 'lazy' : 'eager'} {...(title ? { title } : {})} />\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n\n        {this.hasThumbnails && (\n          <div class={{ 'image-slider__thumbs': true, 'image-slider__thumbs--has-navigation': this.images.length > 5 }}>\n            <button disabled={this.thumbsSwiper?.isBeginning} class=\"image-slider__navigation image-slider--is-prev\" ref={el => (this.previous = el)}>\n              <sc-visually-hidden>{__('Go to previous product slide.', 'surecart')}</sc-visually-hidden>\n              <sc-icon name=\"chevron-left\" aria-hidden=\"true\" tab-index=\"0\" />\n            </button>\n\n            <div class=\"swiper\" ref={el => (this.swiperThumbsRef = el)}>\n              <div\n                class=\"swiper-wrapper\"\n                role=\"radiogroup\"\n                aria-label={sprintf(__('Products slide options section. There are %d options present.', 'surecart'), thumbnails?.length || 0)}\n              >\n                {(thumbnails || []).map(({ src, alt, srcset, width, height, sizes, title }, index) => (\n                  <button\n                    class={{ 'swiper-slide': true, 'image-slider__thumb': true, 'image-slider__thumb--is-active': this.currentSliderIndex === index }}\n                    onClick={() => this.swiper?.slideTo?.(index)}\n                    role=\"radio\"\n                    aria-checked={this.currentSliderIndex === index ? 'true' : 'false'}\n                    tabindex=\"0\"\n                  >\n                    <img\n                      src={src}\n                      alt={sprintf(__('Product image number %d, %s', 'sc-image-slider'), index + 1, alt)}\n                      {...(title ? { title } : {})}\n                      srcset={srcset}\n                      width={width}\n                      height={height}\n                      sizes={sizes}\n                      loading={index > this.thumbnailsPerPage - 1 ? 'lazy' : 'eager'}\n                    />\n                  </button>\n                ))}\n              </div>\n            </div>\n\n            <button disabled={this.thumbsSwiper?.isEnd} class=\"image-slider__navigation image-slider--is-next\" ref={el => (this.next = el)}>\n              <sc-visually-hidden>{__('Go to next product slide.', 'surecart')}</sc-visually-hidden>\n              <sc-icon name=\"chevron-right\" aria-hidden=\"true\" tab-index=\"0\" />\n            </button>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n"]}