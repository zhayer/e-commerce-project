{"version":3,"file":"sc-dashboard-customer-details.js","sourceRoot":"","sources":["../../../../../src/components/controllers/dashboard/customer-details/sc-dashboard-customer-details.tsx"],"names":[],"mappings":"AAAA,OAAO,EAAE,SAAS,EAAE,OAAO,EAAE,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,MAAM,eAAe,CAAC;AACnE,OAAO,EAAE,EAAE,EAAE,MAAM,iBAAiB,CAAC;AACrC,OAAO,EAAE,YAAY,EAAE,MAAM,gBAAgB,CAAC;AAC9C,OAAO,QAAQ,MAAM,6BAA6B,CAAC;AACnD,OAAO,EAAE,cAAc,EAAE,MAAM,4BAA4B,CAAC;AAQ5D,MAAM,OAAO,0BAA0B;;;;;;;;IAQrC,iBAAiB;QACf,cAAc,CAAC,IAAI,CAAC,EAAE,EAAE,GAAG,EAAE;YAC3B,IAAI,CAAC,KAAK,EAAE,CAAC;QACf,CAAC,CAAC,CAAC;IACL,CAAC;IAED,KAAK,CAAC,KAAK;QACT,IAAI,EAAE,KAAK,IAAI,CAAC,UAAU,EAAE,CAAC;YAC3B,OAAO;QACT,CAAC;QACD,IAAI,CAAC;YACH,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;YACpB,IAAI,CAAC,QAAQ,GAAG,CAAC,MAAM,MAAM,QAAQ,CAAC;gBACpC,IAAI,EAAE,YAAY,CAAC,yBAAyB,IAAI,CAAC,UAAU,EAAE,EAAE;oBAC7D,MAAM,EAAE,CAAC,kBAAkB,EAAE,iBAAiB,EAAE,gBAAgB,CAAC;iBAClE,CAAC;aACH,CAAC,CAAa,CAAC;QAClB,CAAC;QAAC,OAAO,CAAC,EAAE,CAAC;YACX,IAAI,CAAC,aAAD,CAAC,uBAAD,CAAC,CAAE,OAAO,EAAE,CAAC;gBACf,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC,OAAO,CAAC;YACzB,CAAC;iBAAM,CAAC;gBACN,IAAI,CAAC,KAAK,GAAG,EAAE,CAAC,sBAAsB,EAAE,UAAU,CAAC,CAAC;YACtD,CAAC;YACD,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAC5B,CAAC;gBAAS,CAAC;YACT,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;QACvB,CAAC;IACH,CAAC;IAED,MAAM;QACJ,OAAO,CACL,4EACE,QAAQ,EAAE,IAAI,CAAC,QAAQ,EACvB,OAAO,EAAE,IAAI,CAAC,OAAO,EACrB,KAAK,EAAE,IAAI,CAAC,KAAK,EACjB,OAAO,EAAE,IAAI,CAAC,OAAO,eACV,YAAY,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,EAAE;gBAC5C,MAAM,EAAE,MAAM;gBACd,KAAK,EAAE,UAAU;gBACjB,EAAE,EAAE,IAAI,CAAC,UAAU;aACpB,CAAC,GACmB,CACxB,CAAC;IACJ,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CACF","sourcesContent":["import { Component, Element, h, Prop, State } from '@stencil/core';\nimport { __ } from '@wordpress/i18n';\nimport { addQueryArgs } from '@wordpress/url';\nimport apiFetch from '../../../../functions/fetch';\nimport { onFirstVisible } from '../../../../functions/lazy';\nimport { Customer } from '../../../../types';\n\n@Component({\n  tag: 'sc-dashboard-customer-details',\n  styleUrl: 'sc-dashboard-customer-details.css',\n  shadow: true,\n})\nexport class ScDashboardCustomerDetails {\n  @Element() el: HTMLScCustomerDetailsElement;\n  @Prop() customerId: string;\n  @Prop() heading: string;\n  @State() customer: Customer;\n  @State() loading: boolean;\n  @State() error: string;\n\n  componentWillLoad() {\n    onFirstVisible(this.el, () => {\n      this.fetch();\n    });\n  }\n\n  async fetch() {\n    if ('' === this.customerId) {\n      return;\n    }\n    try {\n      this.loading = true;\n      this.customer = (await await apiFetch({\n        path: addQueryArgs(`surecart/v1/customers/${this.customerId}`, {\n          expand: ['shipping_address', 'billing_address', 'tax_identifier'],\n        }),\n      })) as Customer;\n    } catch (e) {\n      if (e?.message) {\n        this.error = e.message;\n      } else {\n        this.error = __('Something went wrong', 'surecart');\n      }\n      console.error(this.error);\n    } finally {\n      this.loading = false;\n    }\n  }\n\n  render() {\n    return (\n      <sc-customer-details\n        customer={this.customer}\n        loading={this.loading}\n        error={this.error}\n        heading={this.heading}\n        edit-link={addQueryArgs(window.location.href, {\n          action: 'edit',\n          model: 'customer',\n          id: this.customerId,\n        })}\n      ></sc-customer-details>\n    );\n  }\n}\n"]}