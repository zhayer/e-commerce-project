{"version":3,"file":"sc-customer-email.spec.js","sourceRoot":"","sources":["../../../../../../src/components/controllers/checkout-form/customer-email/test/sc-customer-email.spec.tsx"],"names":[],"mappings":"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","sourcesContent":["import { newSpecPage } from '@stencil/core/testing';\nimport { dispose as disposeCheckout, state as checkoutState } from '@store/checkout';\nimport { dispose as disposeUser, state as userState } from '@store/user';\nimport { Checkout } from '../../../../../types';\nimport { ScCustomerEmail } from '../sc-customer-email';\n\ndescribe('sc-customer-email', () => {\n  beforeEach(() => {\n    disposeCheckout();\n    disposeUser();\n  });\n\n  const checkouts = [\n    {\n      testLabel: 'Customer and Checkout email provided',\n      checkout: {\n        email: 'CheckoutEmail',\n        customer: {\n          email: 'CustomerEmail',\n        },\n      } as Checkout,\n    },\n    {\n      testLabel: 'Customer email provided',\n      checkout: {\n        customer: {\n          email: 'CustomerEmail',\n        },\n      } as Checkout,\n    },\n    {\n      testLabel: 'Checkout email provided',\n      checkout: {\n        email: 'CheckoutEmail',\n      } as Checkout,\n    },\n  ];\n\n  function addUrlParams(params: boolean) {\n    global.window = Object.create(window);\n    Object.defineProperty(window, 'location', {\n      value: {\n        search: params ? new URLSearchParams('?email=UrlEmail').toString() : '',\n      },\n      writable: true,\n    });\n  }\n\n  describe.each(checkouts)('Logged In', test => {\n    describe('Url Params', () => {\n      it(test.testLabel, async () => {\n        addUrlParams(true);\n        userState.loggedIn = true;\n        checkoutState.checkout = test.checkout;\n\n        const page = await newSpecPage({\n          components: [ScCustomerEmail],\n          html: `<sc-customer-email></sc-customer-email>`,\n        });\n\n        expect(page.root).toMatchSnapshot();\n        page.rootInstance.disconnectedCallback();\n      });\n    });\n\n    describe('Without Url Params', () => {\n      it(test.testLabel, async () => {\n        addUrlParams(false);\n        userState.loggedIn = true;\n        checkoutState.checkout = test.checkout;\n\n        const page = await newSpecPage({\n          components: [ScCustomerEmail],\n          html: `<sc-customer-email></sc-customer-email>`,\n        });\n\n        expect(page.root).toMatchSnapshot();\n        page.rootInstance.disconnectedCallback();\n      });\n    });\n  });\n\n  describe.each(checkouts)('Logged Out', test => {\n    it(`${test.testLabel} with URL Params`, async () => {\n      addUrlParams(true);\n      userState.loggedIn = false;\n      checkoutState.checkout = test.checkout;\n\n      const page = await newSpecPage({\n        components: [ScCustomerEmail],\n        html: `<sc-customer-email></sc-customer-email>`,\n      });\n\n      expect(page.root).toMatchSnapshot();\n      page.rootInstance.disconnectedCallback();\n    });\n\n    it(`${test.testLabel} without URL Params`, async () => {\n      addUrlParams(false);\n      userState.loggedIn = false;\n      checkoutState.checkout = test.checkout;\n\n      const page = await newSpecPage({\n        components: [ScCustomerEmail],\n        html: `<sc-customer-email></sc-customer-email>`,\n      });\n\n      expect(page.root).toMatchSnapshot();\n      page.rootInstance.disconnectedCallback();\n    });\n  });\n});\n"]}