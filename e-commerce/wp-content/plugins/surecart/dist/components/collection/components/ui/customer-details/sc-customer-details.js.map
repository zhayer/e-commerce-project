{"version":3,"file":"sc-customer-details.js","sourceRoot":"","sources":["../../../../src/components/ui/customer-details/sc-customer-details.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, Element, h, Prop } from '@stencil/core';\nimport { __ } from '@wordpress/i18n';\nimport { Address, Customer } from '../../../types';\nimport { formatAddress } from 'localized-address-format';\nimport { countryChoices } from '../../../functions/address';\nimport { zones } from '../../../functions/tax';\n\n/**\n * @part base - The elements base wrapper.\n * @part heading - The heading.\n * @part heading-text - The heading text wrapper.\n * @part heading-title - The heading title.\n * @part heading-description - The heading description.\n * @part error__base - The elements base wrapper.\n * @part error__icon - The alert icon.\n * @part error__text - The alert text.\n * @part error__title - The alert title.\n * @part error__ message - The alert message.\n * @part test-tag__base - The base test tag.\n * @part text-tag__content - The base test tag content.\n * @part button__base - The button base.\n * @part button__label - The button label.\n * @part button__prefix - The button prefix.\n */\n@Component({\n  tag: 'sc-customer-details',\n  styleUrl: 'sc-customer-details.css',\n  shadow: true,\n})\nexport class ScCustomerDetails {\n  @Element() el: HTMLScCustomerDetailsElement;\n  @Prop() heading: string;\n  @Prop() editLink: string;\n  @Prop() customer: Customer;\n  @Prop() loading: boolean;\n  @Prop() error: string;\n\n  renderContent() {\n    if (this.loading) {\n      return this.renderLoading();\n    }\n\n    if (!this.customer) {\n      return this.renderEmpty();\n    }\n\n    return (\n      <sc-card no-padding>\n        <sc-stacked-list>\n          {!!this?.customer?.name && (\n            <sc-stacked-list-row style={{ '--columns': '3' }} mobileSize={480}>\n              <div>\n                <strong>{__('Billing Name', 'surecart')}</strong>\n              </div>\n              <div>{this.customer?.name}</div>\n              <div></div>\n              {/** Needed for formatting */}\n            </sc-stacked-list-row>\n          )}\n          {!!this?.customer?.email && (\n            <sc-stacked-list-row style={{ '--columns': '3' }} mobileSize={480}>\n              <div>\n                <strong>{__('Billing Email', 'surecart')}</strong>\n              </div>\n              <div>{this.customer?.email}</div>\n              <div></div>\n            </sc-stacked-list-row>\n          )}\n          {!!Object.keys(this?.customer?.shipping_address || {}).length && this.renderAddress(__('Shipping Address', 'surecart'), this.customer.shipping_address)}\n          {!!Object.keys(this.customer?.billing_address_display).length && this.renderAddress(__('Billing Address', 'surecart'), this.customer.billing_address_display)}\n          {!!this?.customer?.phone && (\n            <sc-stacked-list-row style={{ '--columns': '3' }} mobileSize={480}>\n              <div>\n                <strong>{__('Phone', 'surecart')}</strong>\n              </div>\n              <div>{this.customer?.phone}</div>\n              <div></div>\n            </sc-stacked-list-row>\n          )}\n          {(() => {\n            const { number_type, number } = this.customer?.tax_identifier || {};\n            if (!number || !number_type) return;\n            const label = zones?.[number_type]?.label || __('Tax Id', 'surecart');\n            const isInvalid = this.customer?.tax_identifier?.[`valid_${number_type}`] === false;\n            return (\n              <sc-stacked-list-row style={{ '--columns': '3' }} mobileSize={480}>\n                <div>\n                  <strong>{label}</strong>\n                </div>\n                <div>\n                  {number} {isInvalid && <sc-tag type=\"warning\">{__('Invalid', 'surecart')}</sc-tag>}\n                </div>\n                <div></div>\n              </sc-stacked-list-row>\n            );\n          })()}\n        </sc-stacked-list>\n      </sc-card>\n    );\n  }\n\n  renderAddress(label: string = 'Address', address: Address) {\n    const { name, line_1, line_2, city, state, postal_code, country } = address;\n    const countryName = countryChoices.find(({ value }) => value === country)?.label;\n    return (\n      <sc-stacked-list-row style={{ '--columns': '3' }} mobileSize={480}>\n        <div>\n          <strong>{label}</strong>\n        </div>\n        <div>\n          {[\n            ...(formatAddress({\n              name: name || '',\n              postalCountry: country || '',\n              administrativeArea: state || '',\n              locality: city || '',\n              postalCode: postal_code || '',\n              addressLines: [line_1, line_2].filter(Boolean),\n            }) || []),\n            countryName || country,\n          ].join('\\n')}\n        </div>\n        <div></div>\n      </sc-stacked-list-row>\n    );\n  }\n\n  renderEmpty() {\n    return (\n      <div>\n        <sc-divider style={{ '--spacing': '0' }}></sc-divider>\n        <slot name=\"empty\">\n          <sc-empty icon=\"user\">{__(\"You don't have any billing information.\", 'surecart')}</sc-empty>\n        </slot>\n      </div>\n    );\n  }\n\n  renderLoading() {\n    return (\n      <sc-card no-padding>\n        <sc-stacked-list>\n          <sc-stacked-list-row style={{ '--columns': '2' }} mobile-size={0}>\n            <div style={{ padding: '0.5em' }}>\n              <sc-skeleton style={{ width: '30%', marginBottom: '0.75em' }}></sc-skeleton>\n              <sc-skeleton style={{ width: '20%', marginBottom: '0.75em' }}></sc-skeleton>\n              <sc-skeleton style={{ width: '40%' }}></sc-skeleton>\n            </div>\n          </sc-stacked-list-row>\n        </sc-stacked-list>\n      </sc-card>\n    );\n  }\n\n  render() {\n    return (\n      <sc-dashboard-module exportparts=\"base, heading, heading-text, heading-title, heading-description\" class=\"customer-details\" error={this.error}>\n        <span slot=\"heading\">\n          {this.heading || __('Billing Details', 'surecart')}{' '}\n          {!!this?.customer?.id && !this?.customer?.live_mode && (\n            <sc-tag exportparts=\"base:test-tag__base, content:test-tag__content\" type=\"warning\" size=\"small\">\n              {__('Test', 'surecart')}\n            </sc-tag>\n          )}\n        </span>\n\n        {!!this.editLink && !!this.customer?.id && (\n          <sc-button exportparts=\"base:button__base, label:button__label, prefix:button__prefix\" type=\"link\" href={this.editLink} slot=\"end\">\n            <sc-icon name=\"edit-3\" slot=\"prefix\"></sc-icon>\n            {__('Update', 'surecart')}\n          </sc-button>\n        )}\n\n        {this.renderContent()}\n      </sc-dashboard-module>\n    );\n  }\n}\n"]}