{"version":3,"file":"sc-form-components-validator.js","sourceRoot":"","sources":["../../../../src/components/providers/form-components-validator/sc-form-components-validator.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, Element, h, Prop, State, Watch } from '@stencil/core';\nimport { __ } from '@wordpress/i18n';\nimport { state as checkoutState, onChange as onCheckoutChange } from '@store/checkout';\nimport { TaxProtocol } from '../../../types';\nimport { shippingAddressRequired } from '@store/checkout/getters';\n\n@Component({\n  tag: 'sc-form-components-validator',\n  shadow: true,\n})\nexport class ScFormComponentsValidator {\n  @Element() el: HTMLScFormComponentsValidatorElement;\n\n  private removeCheckoutListener: () => void;\n  private removePaymentRequiresShippingListener: () => void;\n\n  /** Disable validation? */\n  @Prop() disabled: boolean;\n\n  /** The tax protocol */\n  @Prop() taxProtocol: TaxProtocol;\n\n  /** Is there an address field? */\n  @State() hasAddress: boolean;\n\n  /** Is there a tax id field? */\n  @State() hasTaxIDField: boolean;\n\n  /** Is there a bumps field? */\n  @State() hasBumpsField: boolean;\n\n  /** Is there a tax line? */\n  @State() hasTaxLine: boolean;\n\n  /** Is there a bump line? */\n  @State() hasBumpLine: boolean;\n\n  /** Is there shipping choices */\n  @State() hasShippingChoices: boolean;\n\n  /** Is there a shipping amount */\n  @State() hasShippingAmount: boolean;\n\n  /** Is there an invoice details */\n  @State() hasInvoiceDetails: boolean;\n\n  /** Is there an invoice memo */\n  @State() hasInvoiceMemo: boolean;\n\n  /** Is there a trial line item */\n  @State() hasTrialLineItem: boolean;\n\n  handleOrderChange() {\n    // bail if we don't have address invalid error or disabled.\n    if (this.disabled) return;\n\n    // make sure to add the address field if it's not there.\n    if (shippingAddressRequired()) {\n      this.addAddressField();\n    }\n\n    // add order bumps.\n    if (checkoutState.checkout?.recommended_bumps?.data?.length) {\n      this.addBumps();\n    }\n    if (!!checkoutState.checkout?.tax_amount) {\n      this.addTaxLine();\n    }\n\n    // add shipping choices.\n    if (checkoutState.checkout?.shipping_enabled && checkoutState.checkout?.selected_shipping_choice_required) {\n      this.addShippingChoices();\n    }\n\n    if (!!checkoutState.checkout?.shipping_amount) {\n      this.addShippingAmount();\n    }\n\n    // automatically add invoice details if we have an invoice.\n    if (!!checkoutState.checkout?.invoice) {\n      this.addInvoiceDetails();\n      this.addInvoiceMemo();\n    }\n\n    // automatically add trial line item if we have a trial amount.\n    if (!!checkoutState.checkout?.trial_amount) {\n      this.addTrialLineItem();\n    }\n  }\n\n  @Watch('hasAddress')\n  handleHasAddressChange() {\n    if (!this.hasAddress) return;\n    this.handleShippingAddressRequired();\n  }\n\n  componentWillLoad() {\n    this.hasAddress = !!this.el.querySelector('sc-order-shipping-address');\n    this.hasTaxIDField = !!this.el.querySelector('sc-order-tax-id-input');\n    this.hasBumpsField = !!this.el.querySelector('sc-order-bumps');\n    this.hasTaxLine = !!this.el.querySelector('sc-line-item-tax');\n    this.hasShippingChoices = !!this.el.querySelector('sc-shipping-choices');\n    this.hasShippingAmount = !!this.el.querySelector('sc-line-item-shipping');\n    this.hasInvoiceDetails = !!this.el.querySelector('sc-invoice-details');\n    this.hasInvoiceMemo = !!this.el.querySelector('sc-invoice-memo');\n    this.hasTrialLineItem = !!this.el.querySelector('sc-line-item-trial');\n\n    // automatically add address field if tax is enabled.\n    if (this.taxProtocol?.tax_enabled) {\n      this.addAddressField();\n\n      // if eu vat is required, add the tax id field.\n      if (this.taxProtocol?.eu_vat_required) {\n        this.addTaxIDField();\n      }\n    }\n\n    this.handleOrderChange();\n\n    this.removeCheckoutListener = onCheckoutChange('checkout', () => this.handleOrderChange());\n    this.removePaymentRequiresShippingListener = onCheckoutChange('paymentMethodRequiresShipping', () => this.handleOrderChange());\n  }\n\n  disconnectedCallback() {\n    this.removeCheckoutListener();\n    this.removePaymentRequiresShippingListener();\n  }\n\n  handleShippingAddressRequired() {\n    if (!checkoutState.checkout?.shipping_address_required) return;\n\n    // get the address\n    const address = this.el.querySelector('sc-order-shipping-address');\n    if (!address) return;\n\n    // require the address.\n    address.required = true;\n\n    // if we have a customer name field, require that.\n    const customerName = this.el.querySelector('sc-customer-name');\n    if (!!customerName) {\n      customerName.required = true;\n      return;\n    }\n\n    // if we have a customer first name field, require that.\n    const customerFirstName = this.el.querySelector('sc-customer-firstname');\n    const customerLastName = this.el.querySelector('sc-customer-lastname');\n\n    // if we have a customer first name field, require that.\n    if (!!customerFirstName) {\n      customerFirstName.required = true;\n\n      // if we have a customer last name field, require that.\n      if (!!customerLastName) {\n        customerLastName.required = true;\n      }\n\n      return; // we're done here.\n    }\n\n    // require the name and show the name input.\n    address.requireName = true;\n    address.showName = true;\n  }\n\n  addAddressField() {\n    if (this.hasAddress) {\n      return;\n    }\n\n    const payment = this.el.querySelector('sc-payment');\n    const shippingAddress = document.createElement('sc-order-shipping-address');\n    shippingAddress.label = __('Shipping Address', 'surecart');\n    const billingAddress = document.createElement('sc-order-billing-address');\n    billingAddress.label = __('Billing Address', 'surecart');\n    payment.parentNode.insertBefore(shippingAddress, payment);\n    payment.parentNode.insertBefore(billingAddress, payment);\n    this.hasAddress = true;\n  }\n\n  addTaxIDField() {\n    if (this.hasTaxIDField) return;\n    const payment = this.el.querySelector('sc-payment');\n    const taxInput = document.createElement('sc-order-tax-id-input');\n    payment.parentNode.insertBefore(taxInput, payment);\n    this.hasTaxIDField = true;\n  }\n\n  addBumps() {\n    if (this.hasBumpsField) return;\n    const attachReferenceElement = this.el.querySelector('sc-order-billing-address') || this.el.querySelector('sc-payment');\n    const bumps = document.createElement('sc-order-bumps');\n    attachReferenceElement?.parentNode.insertBefore(bumps, attachReferenceElement.nextSibling);\n    this.hasBumpsField = true;\n  }\n\n  addTaxLine() {\n    if (this.hasTaxLine) return;\n    const total = this.el.querySelector('sc-line-item-total[total=total]');\n    const tax = document.createElement('sc-line-item-tax');\n\n    if (!total) return;\n\n    if (total?.previousElementSibling?.tagName === 'SC-DIVIDER') {\n      total.parentNode.insertBefore(tax, total.previousElementSibling);\n    } else {\n      total.parentNode.insertBefore(tax, total);\n    }\n    this.hasTaxLine = true;\n  }\n\n  addShippingChoices() {\n    if (this.hasShippingChoices) return;\n\n    const payment = this.el.querySelector('sc-payment');\n    const shippingChoices = document.createElement('sc-shipping-choices');\n    payment.parentNode.insertBefore(shippingChoices, payment);\n    this.hasShippingChoices = true;\n  }\n\n  addShippingAmount() {\n    if (this.hasShippingAmount) return;\n\n    let insertBeforeElement: Element = this.el.querySelector('sc-line-item-tax');\n    const total = this.el.querySelector('sc-line-item-total[total=total]');\n\n    if (!total) return;\n\n    if (!insertBeforeElement) {\n      insertBeforeElement = total?.previousElementSibling?.tagName === 'SC-DIVIDER' ? total.previousElementSibling : total;\n    }\n\n    const shippingAmount = document.createElement('sc-line-item-shipping');\n    insertBeforeElement.parentNode.insertBefore(shippingAmount, insertBeforeElement);\n    this.hasShippingAmount = true;\n  }\n\n  addInvoiceDetails() {\n    if (this.hasInvoiceDetails) return;\n\n    let lineItems: Element = this.el.querySelector('sc-line-items');\n    const invoiceDetails = document.createElement('sc-invoice-details');\n    lineItems.parentNode.insertBefore(invoiceDetails, lineItems);\n\n    // Add sc-line-item-invoice-number inside sc-invoice-details.\n    const invoiceNumber = document.createElement('sc-line-item-invoice-number');\n    invoiceDetails.appendChild(invoiceNumber);\n\n    // Add sc-line-item-invoice-due-date inside sc-invoice-details.\n    const invoiceDueDate = document.createElement('sc-line-item-invoice-due-date');\n    invoiceDetails.appendChild(invoiceDueDate);\n\n    // Add invoice sc-line-item-invoice-receipt-download inside sc-invoice-details.\n    const invoiceReceiptDownload = document.createElement('sc-line-item-invoice-receipt-download');\n    invoiceDetails.appendChild(invoiceReceiptDownload);\n\n    // Add sc-divider inside sc-invoice-details.\n    const divider = document.createElement('sc-divider');\n    invoiceDetails.appendChild(divider);\n\n    this.hasInvoiceDetails = true;\n  }\n\n  addInvoiceMemo() {\n    if (this.hasInvoiceMemo) return;\n\n    const orderSummary = this.el.querySelector('sc-order-summary');\n\n    const invoiceDetails = document.createElement('sc-invoice-details');\n\n    // Add sc-divider inside sc-invoice-details.\n    orderSummary.parentNode.insertBefore(invoiceDetails, orderSummary.nextSibling);\n\n    // Add sc-invoice-memo inside sc-invoice-details.\n    const invoiceMemo = document.createElement('sc-invoice-memo');\n    invoiceDetails.appendChild(invoiceMemo);\n\n    this.hasInvoiceMemo = true;\n  }\n\n  addTrialLineItem() {\n    if (this.hasTrialLineItem) return;\n\n    const subtotal = this.el.querySelector('sc-line-item-total[total=subtotal]');\n    const trialItem = document.createElement('sc-line-item-trial');\n\n    if (!subtotal) return;\n\n    // Insert the trial item before the coupon form.\n    subtotal.parentNode.insertBefore(trialItem, subtotal.nextSibling);\n\n    this.hasTrialLineItem = true;\n  }\n\n  render() {\n    return <slot />;\n  }\n}\n"]}