{"version":3,"file":"sc-password.js","sourceRoot":"","sources":["../../../../src/components/ui/sc-password/sc-password.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, Prop, h, Method, State, Watch } from '@stencil/core';\nimport { __ } from '@wordpress/i18n';\nimport { speak } from '@wordpress/a11y';\n\nlet showHintTimer, showVerificationTimer;\n\n@Component({\n  tag: 'sc-password',\n  styleUrl: 'sc-password.scss',\n  shadow: true,\n})\nexport class ScPassword {\n  private input: HTMLScInputElement;\n  private confirmInput: HTMLScInputElement;\n\n  /** The input's size. */\n  @Prop({ reflect: true }) size: 'small' | 'medium' | 'large' = 'medium';\n\n  /** The input's value attribute. */\n  @Prop({ mutable: true }) value = '';\n\n  /** Draws a pill-style input with rounded edges. */\n  @Prop({ reflect: true }) pill = false;\n\n  /** The input's label. */\n  @Prop() label: string;\n\n  /** Should we show the label */\n  @Prop() showLabel: boolean = true;\n\n  /** The input's help text. */\n  @Prop() help: string = '';\n\n  /** The input's placeholder text. */\n  @Prop() placeholder: string;\n\n  /** Disables the input. */\n  @Prop({ reflect: true }) disabled: boolean = false;\n\n  /** Makes the input readonly. */\n  @Prop({ reflect: true }) readonly: boolean = false;\n\n  /** Makes the input a required field. */\n  @Prop({ reflect: true }) required = false;\n\n  /** The input's autofocus attribute. */\n  @Prop() autofocus: boolean;\n\n  /** The input's password confirmation attribute. */\n  @Prop({ reflect: true }) confirmation = false;\n\n  /** The name for the input. */\n  @Prop() name: string = 'password';\n\n  /** The input's confirmation label text. */\n  @Prop() confirmationLabel: string;\n\n  /** The input's confirmation placeholder text. */\n  @Prop() confirmationPlaceholder: string;\n\n  /** The input's confirmation help text. */\n  @Prop() confirmationHelp: string;\n\n  /** Ensures strong password validation. */\n  @Prop({ reflect: true }) enableValidation = true;\n\n  /** Hint Text. */\n  @State() hintText: string;\n\n  /** Verify Text. */\n  @State() verifyText: string;\n\n  /** Sets focus on the input. */\n  @Method()\n  async triggerFocus(options?: FocusOptions) {\n    return this.input.triggerFocus(options);\n  }\n\n  @Method()\n  async reportValidity() {\n    this.input?.setCustomValidity?.('');\n    this.confirmInput?.setCustomValidity?.('');\n\n    // confirmation is enabled.\n    if (this.confirmation) {\n      if (this.confirmInput?.value && this.input?.value !== this.confirmInput?.value) {\n        this.confirmInput.setCustomValidity(__('Password does not match.', 'surecart'));\n        speak(__('Password does not match.', 'surecart'), 'assertive');\n      }\n    }\n\n    // hint text is not empty.\n    if (!!this.hintText) {\n      this.input.setCustomValidity(__(this.hintText, 'surecart'));\n    }\n\n    const valid = await this.input.reportValidity();\n    if (!valid) {\n      return false;\n    }\n\n    if (this.confirmInput) {\n      return this.confirmInput.reportValidity();\n    }\n\n    return valid;\n  }\n\n  /** Handle password verification. */\n  handleVerification() {\n    clearTimeout(showVerificationTimer);\n    // show hint text after some delay\n    showVerificationTimer = setTimeout(() => {\n      this.verifyPassword();\n    }, 500);\n  }\n\n  /** Handle password validation. */\n  handleValidate() {\n    this.handleVerification();\n    // clear existing timeout\n    clearTimeout(showHintTimer);\n\n    // show hint text after some delay\n    showHintTimer = setTimeout(() => {\n      this.validatePassword();\n    }, 500);\n  }\n\n  /** Validate the password input. */\n  validatePassword() {\n    if (!this.enableValidation) return;\n\n    // nothing entered.\n    if (this.input?.value.trim().length === 0) {\n      this.hintText = '';\n      return;\n    }\n\n    // must be at least 6 characters.\n    if (this.input?.value.trim().length < 6) {\n      return (this.hintText = __('The password must be at least 6 characters in length.', 'surecart'));\n    }\n\n    // must contain a special charater.\n    const regex = /[-'`~!#*$@_%+=.,^&(){}[\\]|;:â€<>?\\\\]/;\n    if (!regex.test(this.input?.value)) {\n      return (this.hintText = __('Passwords must contain a special character.', 'surecart'));\n    }\n\n    this.hintText = '';\n  }\n\n  /** Verify the password confirmation. */\n  verifyPassword() {\n    if (this.confirmInput?.value && this.input?.value !== this.confirmInput?.value) {\n      this.verifyText = __('Password does not match.', 'surecart');\n      speak(this.verifyText, 'assertive');\n      return;\n    }\n\n    if (!!this.input?.value && !!this.confirmInput?.value && this.input?.value === this.confirmInput?.value) {\n      speak(__('Password is matched.', 'surecart'), 'assertive');\n    }\n\n    this.verifyText = '';\n  }\n\n  @Watch('hintText')\n  handleHintTextChange() {\n    speak(this.hintText, 'assertive');\n  }\n\n  render() {\n    return (\n      <div class=\"password\">\n        <div>\n          <sc-input\n            ref={el => (this.input = el as HTMLScInputElement)}\n            label={this.label}\n            help={this.help}\n            autofocus={this.autofocus}\n            placeholder={this.placeholder}\n            showLabel={this.showLabel}\n            size={this.size ? this.size : 'medium'}\n            type=\"password\"\n            name=\"password\"\n            value={this.value}\n            required={this.required}\n            disabled={this.disabled}\n            onScInput={() => this.handleValidate()}\n          />\n          {!!this.hintText && <small class=\"password__hint\">{this.hintText}</small>}\n        </div>\n\n        {this.confirmation && (\n          <div>\n            <sc-input\n              ref={el => (this.confirmInput = el as HTMLScInputElement)}\n              label={this.confirmationLabel ?? __('Confirm Password', 'surecart')}\n              help={this.confirmationHelp}\n              placeholder={this.confirmationPlaceholder}\n              size={this.size ? this.size : 'medium'}\n              type=\"password\"\n              value={this.value}\n              onScInput={() => this.handleVerification()}\n              required={this.required}\n              disabled={this.disabled}\n            />\n            {!!this.verifyText && <small class=\"password__hint\">{this.verifyText}</small>}\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n"]}