{"version":3,"file":"sc-checkout-unsaved-changes-warning.js","sourceRoot":"","sources":["../../../../src/components/providers/checkout-unsaved-changes-warning/sc-checkout-unsaved-changes-warning.tsx"],"names":[],"mappings":"AAAA,OAAO,EAAE,SAAS,EAAE,IAAI,EAAE,MAAM,eAAe,CAAC;AAChD,OAAO,EAAE,EAAE,EAAE,MAAM,iBAAiB,CAAC;AAOrC,MAAM,OAAO,+BAA+B;;;;IAG1C;;OAEG;IACH,gBAAgB;QACd,MAAM,CAAC,gBAAgB,CAAC,cAAc,EAAE,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,oBAAoB,CAAC,CAAC,CAAC,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC,CAAC;IAChG,CAAC;IAED;;OAEG;IACH,oBAAoB,CAAC,CAAC;QACpB,IAAI,CAAC,UAAU,EAAE,YAAY,EAAE,YAAY,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC;YAClE,OAAO,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;YACnB,CAAC,CAAC,cAAc,EAAE,CAAC;YACnB,CAAC,CAAC,WAAW,GAAG,EAAE,CAAC,+HAA+H,EAAE,UAAU,CAAC,CAAC;YAChK,OAAO,CAAC,CAAC,WAAW,CAAC;QACvB,CAAC;IACH,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;CACF","sourcesContent":["import { Component, Prop } from '@stencil/core';\nimport { __ } from '@wordpress/i18n';\nimport { FormState } from '../../../types';\n\n@Component({\n  tag: 'sc-checkout-unsaved-changes-warning',\n  shadow: true,\n})\nexport class ScCheckoutUnsavedChangesWarning {\n  @Prop() state: FormState;\n\n  /**\n   * Add event listener for beforeunload.\n   */\n  componentDidLoad() {\n    window.addEventListener('beforeunload', e => this.warnIfUnsavedChanges(e), { capture: true });\n  }\n\n  /**\n   * Warn if status is updaing, finalizing, paying or confirming.\n   */\n  warnIfUnsavedChanges(e) {\n    if (['updating', 'finalizing', 'confirming'].includes(this.state)) {\n      console.log({ e });\n      e.preventDefault();\n      e.returnValue = __('Your payment is processing. Exiting this page could cause an error in your order. Please do not navigate away from this page.', 'surecart');\n      return e.returnValue;\n    }\n  }\n}\n"]}