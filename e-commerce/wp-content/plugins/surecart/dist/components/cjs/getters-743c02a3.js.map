{"file":"getters-743c02a3.js","mappings":"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","names":["state"],"sources":["src/store/upsell/getters.ts"],"sourcesContent":["import { state } from './store';\n\n/**\n * Is it busy\n */\nexport const isBusy = () => ['loading', 'busy', 'redirecting'].includes(state.loading);\n\n/**\n * Get the exit url.\n */\nexport const getExitUrl = () => state?.checkout?.metadata?.success_url || state.success_url || null;\n\n/**\n * Get the discounted amount.\n */\nexport const getDiscountedAmount = amount => state?.line_item?.total_amount ?? amount;\n\n/**\n * Get the scratch amount.\n */\nexport const getScratchAmount = amount => (!state?.line_item?.total_savings_amount ? amount : -state?.line_item?.total_savings_amount + state?.line_item?.total_amount);\n\n/**\n * Get upsell remaining time.\n */\nexport const getUpsellRemainingTime = (timeFormat = 'seconds') => {\n  // Get upsell expiration timestamp from checkout.\n  const expiresAt = state.checkout?.upsells_expire_at; // in seconds\n\n  // If no expiration timestamp, return 0.\n  if (!expiresAt) return null;\n\n  // Get current timestamp.\n  const now = Date.now();\n\n  // Get remaining time in seconds.\n  const remaining = Math.floor((expiresAt * 1000 - now) / 1000);\n\n  // If remaining time is less than 0, return 0.\n  if (remaining < 0) return 0;\n\n  // Check time format - seconds, minues, hours.\n  if (timeFormat === 'seconds') return remaining;\n  if (timeFormat === 'minutes') return Math.floor(remaining / 60);\n  if (timeFormat === 'hours') return Math.floor(remaining / 60 / 60);\n};\n\n/**\n * Format time unit - add a zero if unit is less than 10.\n */\nexport const formatTimeUnit = unit => (unit < 10 ? `0${unit}` : `${unit}`);\n\n/**\n * Get formatted remaining time.\n */\nexport const getFormattedRemainingTime = () => {\n  // not loaded.\n  if (!state.checkout?.upsells_expire_at) return '--:--';\n\n  const time = getUpsellRemainingTime('seconds');\n\n  const days = Math.floor(time / (60 * 60 * 24));\n  const hours = Math.floor((time % (60 * 60 * 24)) / (60 * 60));\n  const minutes = Math.floor((time % (60 * 60)) / 60);\n  const seconds = Math.floor(time % 60);\n\n  if (days > 0) {\n    return `${formatTimeUnit(days)}:${formatTimeUnit(hours)}:${formatTimeUnit(minutes)}:${formatTimeUnit(seconds)}`;\n  }\n  if (hours > 0) {\n    return `${formatTimeUnit(hours)}:${formatTimeUnit(minutes)}:${formatTimeUnit(seconds)}`;\n  }\n  return `${formatTimeUnit(minutes)}:${formatTimeUnit(seconds)}`;\n};\n\n/**\n * Is upsell expired.\n */\nexport const isUpsellExpired = () => {\n  // Get remaining time in seconds.\n  const remaining = getUpsellRemainingTime();\n\n  // Make sure we wait until it's set.\n  return getUpsellRemainingTime() === null ? false : remaining <= 0;\n};\n"],"version":3}